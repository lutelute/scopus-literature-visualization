# Claude作業引き継ぎガイド - 開発版

このファイルは、Claude Code セッションでの開発・テスト作業内容を記録し、次回の開発作業引き継ぎを円滑にするためのガイドです。

## 📋 開発用ツール概要

**ディレクトリ**: `dev_tools/`  
**目的**: 開発・テスト・デバッグ・作業状況確認  
**使用場面**: システム開発、問題診断、作業継続時  

## 🛠️ 開発ツール一覧

### 1. 進行状況確認.py
**用途**: プロジェクトの現在状況を詳細に分析・記録

```bash
python3 dev_tools/進行状況確認.py
```

**機能**:
- ファイル数・フォルダサイズの詳細分析
- 処理段階の自動判定
- キャッシュファイル存在確認
- 問題診断機能
- 進行状況JSONファイル自動保存
- 作業再開ガイド表示

**出力ファイル**: `dev_tools/進行状況.json`

### 2. テスト実行.py
**用途**: システム構成と必要ファイルの存在確認

```bash
python3 dev_tools/テスト実行.py
```

**機能**:
- 重要スクリプトファイルの存在確認
- フォルダ構成の検証
- 出力ディレクトリの状況確認
- 次ステップの推奨表示

### 3. 作業再開.md
**用途**: 作業中断後の再開方法ガイド

**内容**:
- 状況別の再開手順
- トラブルシューティング
- コマンド例
- 自動保存ファイルの説明

### 4. CLAUDE_開発版.md（本ファイル）
**用途**: Claude開発セッション用の引き継ぎガイド

## 🔄 開発フロー

### 開発作業開始時
1. **状況確認**
```bash
python3 dev_tools/進行状況確認.py
```

2. **システムテスト**
```bash
python3 dev_tools/テスト実行.py
```

3. **問題があれば診断・修正**

### 開発作業中
- 定期的な進行状況確認
- テスト実行でファイル整合性確認
- 新機能追加時の動作検証

### 開発作業終了時
- 最終進行状況記録
- 問題点・改善点の記録
- 次回作業予定の明記

## 🧪 テスト・デバッグ方法

### システム全体テスト
```bash
# 1. 構成確認
python3 dev_tools/テスト実行.py

# 2. 進行状況分析
python3 dev_tools/進行状況確認.py

# 3. メイン処理テスト（必要に応じて）
python3 core/scopus解析.py
```

### 個別機能テスト
```bash
# CSV結合テスト
python3 combine_scopus_csv.py

# DOI取得テスト（少数件）
python3 scopus_doi_to_json.py

# Markdown生成テスト
python3 json2tag_ref_scopus_async.py
```

### クリーンアップテスト
```bash
# 自動生成ファイル削除
python3 utils/クリーンアップ.py

# 再実行テスト
python3 core/scopus解析.py
```

## 📊 開発データ分析

### 進行状況JSON構造
```json
{
  "記録日時": "YYYY-MM-DD HH:MM:SS",
  "ファイル数": {
    "JSON": 27,
    "Markdown": 27,
    "PDF": 2
  },
  "フォルダサイズ_MB": {
    "JSON_folder": 2.16,
    "md_folder": 0.4,
    "PDF": 7.88
  },
  "キャッシュファイル": {
    "crossref_cache.sqlite": true,
    "doi_title_cache.json": true,
    "scopus_combined.csv": true
  },
  "処理段階": {
    "CSV結合": true,
    "DOI取得": true,
    "Markdown生成": true,
    "キーワード分析": "実行確認が必要",
    "YAML追加": "実行確認が必要",
    "PDF取得": true
  }
}
```

## 🔍 問題診断チェックリスト

### ファイル存在確認
- [ ] `GFM_rev/scopus_gfm_rev.csv` （入力CSV）
- [ ] 重要スクリプトファイル群
- [ ] 出力ディレクトリ（JSON_folder, md_folder, PDF）

### 権限確認
- [ ] 書き込み権限
- [ ] 実行権限

### 依存関係確認
- [ ] Python 3.7+
- [ ] 必須ライブラリ（requests, pandas等）
- [ ] オプションライブラリ（aiohttp, nltk）

### 処理状況確認
- [ ] CSV結合状況
- [ ] DOI取得状況
- [ ] Markdown生成状況
- [ ] PDF取得状況

## 🚀 開発作業のベストプラクティス

### 1. 作業開始時
- 必ず進行状況確認から開始
- システムテストで整合性確認
- 前回の課題・TODO確認

### 2. 機能開発時
- 小さな変更で動作確認
- エラーハンドリングの実装
- ログ出力の追加

### 3. 作業終了時
- 進行状況記録更新
- 問題点・改善点記録
- 次回TODOの明記

### 4. 引き継ぎ時
- work_log.md の詳細更新
- 開発版Claude引き継ぎガイド更新
- 重要な変更点の明記

## 📝 開発メモ

### 現在の課題・TODO
- （作業時に記録）

### 改善アイデア
- （作業時に記録）

### 技術的制約・注意点
- API制限（Crossref: 50req/sec, Unpaywall制限なし）
- 大量DOI処理時のメモリ使用量
- 非同期処理の例外ハンドリング

---

**💡 開発のコツ**: このdev_toolsディレクトリのツールを活用して、効率的な開発サイクルを維持してください。